<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap   
	PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" 
	"http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="easytop.cms.technlg">
	
	<typeAlias alias="technlg" type="com.easytop.cms.bean.Technology"/>
	
	<sql id="query">
		<dynamic prepend="WHERE">
			<isNotEmpty property="state" prepend="AND">
				STATE = #state#
			</isNotEmpty>
			<isNotEmpty property="name" prepend="AND">
				NAME = #name#
			</isNotEmpty>
		</dynamic>
	</sql>
		
	<insert id="add" parameterClass="map">
		INSERT INTO TECHNOLOGY(`NAME`,`STATE`,`CREATETIME`,`CREATOR`,`CONTEXT`)
		values(#name#,#state#,NOW(),#creator#,#context#)
	</insert>
	
	<select id="getTotal" parameterClass="map" resultClass="int">
		SELECT COUNT(ID) FROM TECHNOLOGY 
		<include refid="query"/>
	</select>
	
	<select id="list" parameterClass="map" resultClass="technlg">
		SELECT `ID`,`NAME`,`STATE`,`CREATETIME`,`CREATOR`,`CONTEXT` FROM TECHNOLOGY
		<include refid="query"/>
		ORDER BY ID DESC
		
		<dynamic prepend="LIMIT">
			<isNotEmpty property="start" prepend="," >
				#start#,#pageSize#
			</isNotEmpty>
		</dynamic>
	</select>
	
	<delete id="deleteById" parameterClass="map">
		DELETE FROM  TECHNOLOGY WHERE ID = #id#
	</delete>
	
	<select id="view" parameterClass="map" resultClass="technlg">
		SELECT `ID`,`NAME`,`STATE`,`CREATETIME`,`CREATOR`,`CONTEXT` FROM TECHNOLOGY  WHERE ID = #id#
	</select>
	
	<update id="update" parameterClass="map">
		UPDATE TECHNOLOGY 
		<dynamic prepend="SET">
			<isNotEmpty property="name" prepend=",">
				NAME = #name#
			</isNotEmpty>
			<isNotEmpty property="state" prepend=",">
				STATE = #state#
			</isNotEmpty>
			<isNotEmpty property="context" prepend=",">
				CONTEXT = #context#
			</isNotEmpty>
		</dynamic>
		WHERE ID  = #id#
	</update>
</sqlMap>